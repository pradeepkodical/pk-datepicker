(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{505:function(module,exports,__webpack_require__){__webpack_require__(506),__webpack_require__(698),__webpack_require__(699),__webpack_require__(901),__webpack_require__(902),__webpack_require__(908),__webpack_require__(909),__webpack_require__(907),__webpack_require__(904),__webpack_require__(910),__webpack_require__(905),__webpack_require__(906),__webpack_require__(911),module.exports=__webpack_require__(897)},595:function(module,exports){},645:function(module,exports){},699:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(368)},897:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(368).configure)([__webpack_require__(898),__webpack_require__(899)],module,!1)}).call(this,__webpack_require__(215)(module))},898:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=898},899:function(module,exports,__webpack_require__){var map={"./stories/YearsCalendar.stories.tsx":903};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=899},903:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"LightMode",(function(){return LightMode})),__webpack_require__.d(__webpack_exports__,"DarkMode",(function(){return DarkMode}));var objectSpread2=__webpack_require__(134),react=__webpack_require__(0),toConsumableArray=__webpack_require__(316),getWeek=__webpack_require__(921),format=__webpack_require__(920),getDaysInYear=__webpack_require__(923),addDays=__webpack_require__(918),classCallCheck=__webpack_require__(94),createClass=__webpack_require__(95),inherits=__webpack_require__(118),createSuper=__webpack_require__(117),drawItem_DrawItem=function(){function DrawItem(){Object(classCallCheck.a)(this,DrawItem),this.top=0,this.left=0,this.width=0,this.height=0,this.minHeight=0,this.data=null,this.hovering=!1,this.selected=!1,this.parent=void 0}return Object(createClass.a)(DrawItem,[{key:"getWidth",value:function getWidth(){return this.width}},{key:"getHeight",value:function getHeight(){return Math.max(this.height,this.minHeight)}},{key:"getHit",value:function getHit(x,y){return this.left<=x&&this.left+this.getWidth()>=x&&this.top<=y&&this.top+this.getHeight()>=y?this:null}}]),DrawItem}(),textDrawItem_TextDrawItem=function(_DrawItem){Object(inherits.a)(TextDrawItem,_DrawItem);var _super=Object(createSuper.a)(TextDrawItem);function TextDrawItem(){var _this;Object(classCallCheck.a)(this,TextDrawItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).text="",_this.color="#111",_this.bgColor="#fff",_this}return Object(createClass.a)(TextDrawItem,[{key:"draw",value:function draw(ctx){ctx.font="12px Verdana",ctx.textAlign="left",ctx.textBaseline="middle";var size=ctx.measureText(this.text);ctx.fillStyle=this.bgColor,ctx.fillRect(this.left,this.top,size.width,this.height),ctx.fillStyle=this.color,ctx.fillText(this.text,this.left,this.top+this.height/2)}}],[{key:"create",value:function create(left,top,height,color,bgColor,text,data){var item=new TextDrawItem;return item.left=left,item.top=top,item.width=0,item.height=height,item.color=color,item.bgColor=bgColor,item.text=text,item.data=data,item}}]),TextDrawItem}(drawItem_DrawItem);__webpack_require__(919);function getMousePos(ctx,evt){var rect=ctx.canvas.getBoundingClientRect();return{x:(evt.clientX-rect.left)/(rect.right-rect.left)*ctx.canvas.width,y:(evt.clientY-rect.top)/(rect.bottom-rect.top)*ctx.canvas.height}}var jsx_runtime=__webpack_require__(62);function CanvasContainer(props){var drawItems=props.drawItems,onClick=props.onClick,onHover=props.onHover,children=props.children,minHeight=props.minHeight,height=Object(react.useMemo)((function(){return Math.min(2e4,drawItems.reduce((function(p,c){return p+c.getHeight()}),0))}),[drawItems]),width=Object(react.useMemo)((function(){return Math.min(2e4,drawItems.reduce((function(p,c){return Math.max(p,c.getWidth())}),0))}),[drawItems]),draw=Object(react.useCallback)((function(ctx){ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),null==drawItems||drawItems.forEach((function(di){di.draw(ctx)}))}),[drawItems]),click=Object(react.useCallback)((function(_ref,ctx){var x=_ref.x,y=_ref.y,hitItem=drawItems.reduce((function(p,c){return p||c.getHit(x,y)}),null);hitItem&&onClick&&hitItem.data&&onClick(hitItem.data)}),[drawItems,onClick]),lastHit=Object(react.useRef)(null),canvasRef=function useCanvas(draw,click,hover){var canvasRef=Object(react.useRef)(null);return Object(react.useEffect)((function(){var context=canvasRef.current.getContext("2d");draw(context)}),[draw]),Object(react.useEffect)((function(){if(click){var canvas=canvasRef.current,context=canvas.getContext("2d"),func=function func(evt){click(getMousePos(context,evt),context)};return canvas.addEventListener("click",func),function(){canvas.removeEventListener("click",func)}}}),[click]),Object(react.useEffect)((function(){if(hover){var canvas=canvasRef.current,context=canvas.getContext("2d"),func=function func(evt){hover(getMousePos(context,evt),context)};return canvas.addEventListener("mousemove",func),function(){canvas.removeEventListener("mousemove",func)}}}),[hover]),canvasRef}(draw,click,Object(react.useCallback)((function(_ref2,ctx){var x=_ref2.x,y=_ref2.y,hitItem=drawItems.reduce((function(p,c){return p||c.getHit(x,y)}),null);if(!(hitItem instanceof textDrawItem_TextDrawItem)){if(lastHit.current!==hitItem){if(lastHit.current){var _di$parent,di=lastHit.current;if(di)di.hovering=!1,null===(_di$parent=di.parent)||void 0===_di$parent||_di$parent.draw(ctx),di.draw(ctx)}lastHit.current=hitItem,hitItem&&onHover&&hitItem.data&&onHover(hitItem.data,x,y)}var _hitItem$parent;if(hitItem)hitItem.hovering=!0,hitItem.draw(ctx),null===(_hitItem$parent=hitItem.parent)||void 0===_hitItem$parent||_hitItem$parent.draw(ctx)}}),[drawItems,lastHit,onHover]));return Object(jsx_runtime.jsxs)("div",{style:{padding:"8px",position:"relative",overflow:"auto",minHeight:minHeight},children:[Object(jsx_runtime.jsx)("canvas",{width:width,height:height,ref:canvasRef}),children]})}try{canvasContainer.displayName="canvasContainer",canvasContainer.__docgenInfo={description:"",displayName:"canvasContainer",props:{drawItems:{defaultValue:null,description:"",name:"drawItems",required:!0,type:{name:"DrawItem[]"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((item: any) => void)"}},onHover:{defaultValue:null,description:"",name:"onHover",required:!1,type:{name:"((item: any, x: number, y: number) => void)"}},minHeight:{defaultValue:null,description:"",name:"minHeight",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/drawLib/canvasContainer.tsx#canvasContainer"]={docgenInfo:canvasContainer.__docgenInfo,name:"canvasContainer",path:"src/drawLib/canvasContainer.tsx#canvasContainer"})}catch(__react_docgen_typescript_loader_error){}var get=__webpack_require__(237),getPrototypeOf=__webpack_require__(104),boxDrawItem_BoxDrawItem=function(_DrawItem){Object(inherits.a)(BoxDrawItem,_DrawItem);var _super=Object(createSuper.a)(BoxDrawItem);function BoxDrawItem(){var _this;Object(classCallCheck.a)(this,BoxDrawItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).bgColor="#fff",_this.color="#111",_this.borderColor="#fff",_this.selBgColor="#dcf5ff",_this.text=void 0,_this}return Object(createClass.a)(BoxDrawItem,[{key:"draw",value:function draw(ctx){ctx.fillStyle=this.selected||this.hovering?this.selBgColor:this.bgColor,ctx.fillRect(this.left,this.top,this.getWidth(),this.getHeight()),this.borderColor!==this.bgColor&&(ctx.strokeWidth=.5,ctx.strokeStyle=this.borderColor,ctx.strokeRect(this.left,this.top,this.getWidth(),this.getHeight())),this.text&&(ctx.font="9px Verdana",ctx.textBaseline="middle",ctx.textAlign="center",ctx.fillStyle=this.color,ctx.fillText(this.text,this.left+this.getWidth()/2,this.top+this.getHeight()/2,this.getWidth()))}}],[{key:"create",value:function create(top,left,size,color,bgColor,selBgColor,borderColor,data,text){var item=new BoxDrawItem;return item.left=left,item.top=top,item.width=size,item.height=size,item.color=color,item.bgColor=bgColor,item.selBgColor=selBgColor,item.borderColor=borderColor,item.data=data,item.text=text,item}}]),BoxDrawItem}(drawItem_DrawItem),containerDrawItem_ContainerDrawItem=function(_BoxDrawItem){Object(inherits.a)(ContainerDrawItem,_BoxDrawItem);var _super=Object(createSuper.a)(ContainerDrawItem);function ContainerDrawItem(){var _this;Object(classCallCheck.a)(this,ContainerDrawItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).items=[],_this}return Object(createClass.a)(ContainerDrawItem,[{key:"draw",value:function draw(ctx){ctx.fillStyle=this.bgColor,ctx.fillRect(this.left,this.top,this.getWidth(),this.getHeight()),this.items.forEach((function(x){return x.draw(ctx)}))}},{key:"getWidth",value:function getWidth(){return 0!==this.width?this.width:this.items.reduce((function(p,c){return Math.max(p,c.left+c.getWidth())}),0)}},{key:"getHeight",value:function getHeight(){var h=this.height;return h=0!==h?h:this.items.reduce((function(p,c){return Math.max(p,c.top+c.getHeight())}),0),Math.max(h,this.minHeight)}},{key:"getHit",value:function getHit(x,y){for(var i=0;i<this.items.length;i++){var item=this.items[i].getHit(x,y);if(item)return item}return Object(get.a)(Object(getPrototypeOf.a)(ContainerDrawItem.prototype),"getHit",this).call(this,x,y)}}]),ContainerDrawItem}(boxDrawItem_BoxDrawItem),gridDrawItem_GridDrawItem=function(_ContainerDrawItem){Object(inherits.a)(GridDrawItem,_ContainerDrawItem);var _super=Object(createSuper.a)(GridDrawItem);function GridDrawItem(){var _this;Object(classCallCheck.a)(this,GridDrawItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).bgColor="#fff",_this.color="#111",_this.borderColor="#fff",_this.selBgColor="#dcf5ff",_this.text=void 0,_this}return Object(createClass.a)(GridDrawItem,[{key:"draw",value:function draw(ctx){ctx.fillStyle=this.selected||this.hovering?this.selBgColor:this.bgColor,ctx.fillRect(this.left,this.top,this.getWidth(),this.getHeight()),this.borderColor!==this.bgColor&&(ctx.strokeWidth=.5,ctx.strokeStyle=this.borderColor,ctx.strokeRect(this.left,this.top,this.getWidth(),this.getHeight())),Object(get.a)(Object(getPrototypeOf.a)(GridDrawItem.prototype),"draw",this).call(this,ctx),this.text&&(ctx.font="9px Verdana",ctx.textBaseline="middle",ctx.textAlign="center",ctx.fillStyle=this.color,ctx.fillText(this.text,this.left+this.getWidth()/2,this.top+this.getHeight()/2,this.getWidth()))}}],[{key:"create",value:function create(top,left,size,color,bgColor,selBgColor,borderColor,data,text){var item=new GridDrawItem;item.left=left,item.top=top,item.width=size,item.height=size,item.bgColor=bgColor,item.selBgColor=selBgColor,item.data=data,item.text=text,item.color=color,item.borderColor=borderColor;var arr1=data,c=Math.min(arr1.length,2),size1=size/c-1;return arr1.forEach((function(a,idx){var item1=boxDrawItem_BoxDrawItem.create(top+Math.floor(idx/c)*size1,left+idx%c*size1,size1,color,a.bgColor,selBgColor,borderColor,a,"");item1.parent=item,item.items.push(item1)})),item}}]),GridDrawItem}(containerDrawItem_ContainerDrawItem),defaultConfig={selBgColor:"#dcf5ff",defaultBgColor:"#fff",alternateBgColor:"#fefefe",textColor:"#000",selTextColor:"#111",borderColor:"#efefef"};function YearBox(props){var year=props.year,items=props.items,onClick=props.onClick,_onHover=props.onHover,config=props.config,drawItems=Object(react.useMemo)((function(){var startDate=new Date(year,0,15),arr=[].concat(Object(toConsumableArray.a)(function getWeekDayHeader(config){var arr=[];return["S","M","T","W","T","F","S"].forEach((function(x,idx){arr.push(textDrawItem_TextDrawItem.create(25,25*(idx+1),25,config.textColor||"#111",config.defaultBgColor||"#fff",x,{}))})),arr}(config)),Object(toConsumableArray.a)(function getMonthsHeader(year,config){for(var startDate=new Date(year,0,15),arr=[],i=0;i<12;i++){startDate.setMonth(i);var w=Object(getWeek.a)(startDate);i>10&&w<45&&(w=53),arr.push(textDrawItem_TextDrawItem.create(25*(1+w),0,25,config.textColor||"#111",config.defaultBgColor||"#fff",Object(format.a)(startDate,"MMM"),{}))}return arr}(year,config)));startDate=new Date(year,0,1);var date,top,w,maxDays=Object(getDaysInYear.a)(startDate),allData={};items.forEach((function(a){var index=a.date.toDateString();allData[index]||(allData[index]=[]),allData[index].push(a)}));for(var i=0;i<maxDays;i++){var loc=(top=void 0,w=void 0,top=25*(date=startDate).getDay(),w=Object(getWeek.a)(date),date.getMonth()>10&&w<45&&(w=53),{top:top,left:25*w}),bgColor=startDate.getMonth()%2==0?config.defaultBgColor:config.alternateBgColor,index=startDate.toDateString();if(allData[index]){var _item=gridDrawItem_GridDrawItem.create(loc.top+25,loc.left+25,23,config.selTextColor||"brown",bgColor||"#fff",config.selBgColor||"#fff",config.borderColor||"#fff",allData[index],"".concat(startDate.getDate()));arr.push(_item)}else{var _item2=boxDrawItem_BoxDrawItem.create(loc.top+25,loc.left+25,23,config.textColor||"#111",bgColor||"#fff",config.selBgColor||"#fff",config.borderColor||"#fff","","".concat(startDate.getDate()));arr.push(_item2)}startDate=Object(addDays.a)(startDate,1)}var c=new containerDrawItem_ContainerDrawItem;return c.items=arr,c.bgColor=config.defaultBgColor||"#fff",c.color=config.textColor||"#111",[c]}),[year,items,config]);return Object(jsx_runtime.jsxs)("div",{style:{display:"flex",padding:"10px",justifyContent:"center",backgroundColor:config.defaultBgColor,color:config.textColor},children:[Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)("div",{style:{fontWeight:"bold",fontSize:"x-large",transform:"translateY(80px) rotate(-90deg)"},children:year})}),Object(jsx_runtime.jsx)(CanvasContainer,{drawItems:drawItems,onClick:onClick,onHover:function onHover(item,x,y){item&&_onHover&&_onHover(item,x,y)}})]})}function YearsCalendar(props){var items=props.items,config=props.config,onClick=props.onClick,onHover=props.onHover,groupedItems=Object(react.useMemo)((function(){return function groupBy(list,getKey){return list.reduce((function(previous,currentItem){var group=getKey(currentItem);return previous[group]||(previous[group]=[]),previous[group].push(currentItem),previous}),{})}(items,(function(item){return item.date.getFullYear()}))}),[items]),theConfig=Object(objectSpread2.a)(Object(objectSpread2.a)({},defaultConfig),config);return Object(jsx_runtime.jsx)("div",{children:Object.keys(groupedItems).map((function(key,i){return Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(YearBox,{year:key,items:groupedItems[key],config:theConfig,onClick:onClick,onHover:onHover})},i)}))})}try{YearsCalendar.displayName="YearsCalendar",YearsCalendar.__docgenInfo={description:"",displayName:"YearsCalendar",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"IHaveDate[]"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"ColorConfig"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((data: IHaveDate) => void)"}},onHover:{defaultValue:null,description:"",name:"onHover",required:!1,type:{name:"((data: IHaveDate, x: number, y: number) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/YearsCalendar/YearsCalendar.tsx#YearsCalendar"]={docgenInfo:YearsCalendar.__docgenInfo,name:"YearsCalendar",path:"src/components/YearsCalendar/YearsCalendar.tsx#YearsCalendar"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"Example/YearsCalendar",component:YearsCalendar};var YearsCalendar_stories_Template=function Template(args){return Object(jsx_runtime.jsx)(YearsCalendar,Object(objectSpread2.a)({},args))},YearsCalendar_stories_data=[{date:new Date,bgColor:"red"},{date:new Date(2019,1,1),bgColor:"pink"},{date:new Date(2019,1,1),bgColor:"orange"},{date:new Date,bgColor:"purple"}],LightMode=YearsCalendar_stories_Template.bind({});LightMode.args={config:{selBgColor:"#dcf5ff",alternateBgColor:"#eee",defaultBgColor:"#fff",textColor:"#000",selTextColor:"pink",borderColor:"#999"},items:YearsCalendar_stories_data};var DarkMode=YearsCalendar_stories_Template.bind({});DarkMode.args={config:{selBgColor:"#aaa",alternateBgColor:"#444",defaultBgColor:"#111",textColor:"#fff",selTextColor:"red",borderColor:"#666"},items:YearsCalendar_stories_data},LightMode.parameters=Object(objectSpread2.a)({storySource:{source:"(args) => (\r\n  <YearsCalendar {...args} />\r\n)"}},LightMode.parameters),DarkMode.parameters=Object(objectSpread2.a)({storySource:{source:"(args) => (\r\n  <YearsCalendar {...args} />\r\n)"}},DarkMode.parameters)},911:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));var client_api=__webpack_require__(922),esm=__webpack_require__(4),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.c)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.d)(loader,!1)}));case"parameters":return Object(client_api.e)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(client_api.b)(enhancer)}));case"render":return Object(client_api.g)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.e)(v,!1);default:return console.log(key+" was not supported :( !")}}))}},[[505,2,3]]]);